<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT File Upload</title>
</head>
<body>
    <h1>ChatGPT File Upload and Prompt</h1>

    <!-- Text area for the prompt -->
    <textarea id="prompt" placeholder="Enter your prompt here"></textarea>

    <!-- File upload input -->
    <input type="file" id="fileUpload" />

    <!-- Submit button -->
    <button onclick="submitPrompt()">Submit</button>

    <!-- Response area -->
    <h2>Response</h2>
    <pre id="response"></pre>

    <script>
        // Example function to handle file uploads and send prompts
        function submitPrompt() {
            const prompt = document.getElementById("prompt").value;
            const fileInput = document.getElementById("fileUpload");
            const file = fileInput.files[0];

            // Read the file contents (if any)
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const fileContent = e.target.result;
                    // Send the file content and prompt to the server or OpenAI API
                    sendToChatGPT(prompt, fileContent);
                };
                reader.readAsText(file);
            } else {
                // No file, just send the prompt
                sendToChatGPT(prompt);
            }
        }

        // Function to send prompt and file content to OpenAI API
        function sendToChatGPT(prompt, fileContent = null) {
            const apiKey = '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'; // Replace with your OpenAI API key
            const url = 'https://api.openai.com/v1/completions'; // Example for OpenAI API

            const requestData = {
                model: 'text-davinci-003',  // Adjust the model as needed
                prompt: prompt + (fileContent ? `\nFile content: ${fileContent}` : ""),
                max_tokens: 200,
            };

            fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${apiKey}`
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("response").innerText = data.choices[0].text;
            })
            .catch(error => {
                document.getElementById("response").innerText = "Error: " + error.message;
            });
        }
    </script>
</body>
</html>
